<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <script src="auth.js"></script>
</head>
<body onload="loadProfile()">

  <h2>Hồ sơ nhân viên</h2>

  <div id="profile"></div>

  <br>
  <a href="dashboard.html">⬅ Quay lại Dashboard</a>

  <script>
    async function loadProfile() {
      const token = localStorage.getItem("session_token");
      if (!token) {
        window.location.href = "login.html";
        return;
      }

      // Gọi API lấy thông tin user
      const res = await api("getUserInfo", { token });

      if (!res.success) {
        alert("Session hết hạn hoặc lỗi");
        window.location.href = "login.html";
        return;
      }

      const user = res.user;

      // Render thông tin
      let html = "<ul>";
      for (let key in user) {
        html += `<li><b>${key}</b>: ${user[key]}</li>`;
      }
      html += "</ul>";

      document.getElementById("profile").innerHTML = html;
    }
  </script>

</body>
</html>
